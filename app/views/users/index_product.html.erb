<div class="container-fluid">

    <br>
    <h2 class="title">Favourite products</h2>

  <% if @products == [] %>
      <div>
        <div class="alert-warning" role="alert">You have no favourite products yet.</div>
      </div>
  <% else %>

    <% @products.each do |product| %>
      <% if product.season_start <= Date.today.strftime("%m").to_i && product.season_end >= Date.today.strftime("%m").to_i %>
        <% @products_in_season << product %>
      <% else %>
        <% @products_not_in_season << product %>
      <% end %>
    <% end %>

    <div id="season">
      <h3>In season</h3>
    </div>

    <% unless @products_in_season == [] %>
      <div class="container">
        <div class="row">
          <% @products_in_season.each do |product| %>
            <div class="col-6 mt-3 px-2">
              <div class="card-product">
                <% if current_user.voted_for? product  %>
                  <%= link_to product_downvote_path(product), method: :patch, class: "button is-link" do %>
                    <span class="icon">
                      <i class="fas fa-heart heart-full card-product-heart"></i>
                    </span>
                  <% end %>
                <% else %>
                  <%= link_to product_upvote_path(product), method: :patch, class: "button is-link" do %>
                    <span class="icon">
                      <i class="fas fa-heart heart-empty card-product-heart"></i>
                    </span>
                  <% end %>
                <% end %>
                <%= link_to product_path(product, search: params[:search].present? ? params[:search][:query] : "") do %>
                <%= image_tag product.photo, class:"card-product-img" %>
                <div class="card-product-body">
                  <% if product.name.length > 10 %>
                    <h3><%= product.name[0..9]%>..</h3>
                  <% else %>
                    <h3><%= product.name%></h3>
                  <% end %>
                  <% if product.season_start? && product.season_end? %>
                    <p><%= product.season_start_month %> - <%= product.season_end_month %></p>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
</div>

